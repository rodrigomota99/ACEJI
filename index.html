<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACEJI - Loja Oficial</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #1E8449; /* Verde */
            --secondary: #F1C40F; /* Amarelo */
            --accent: #E74C3C; /* Vermelho */
            --light: #ECF0F1;
            --dark: #2C3E50;
            --text: #333333;
            --success: #27AE60;
            --instagram: #E1306C;
            --whatsapp: #25D366;
            --pix: #32BCAD;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        
        body { background-color: #f5f5f5; color: var(--text); line-height: 1.6; padding: 20px; min-height: 100vh; }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            position: relative;
        }

        /* --- ESTILOS DO MENU PRINCIPAL --- */
        #main-menu { display: block; padding: 40px 20px; text-align: center; }
        
        .menu-header { margin-bottom: 40px; }
        .menu-logo-img { width: 160px; height: 160px; margin: 0 auto 15px; background: rgba(30, 132, 73, 0.1); border-radius: 50%; padding: 10px; display: flex; align-items: center; justify-content: center; }
        .menu-logo-img img { max-width: 100%; max-height: 100%; object-fit: contain; }
        .menu-title { font-size: 3rem; color: var(--primary); font-weight: bold; text-transform: uppercase; letter-spacing: 3px; }
        .menu-subtitle { font-size: 1.2rem; color: #666; font-weight: 300; }
        
        .categories-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 30px; margin-bottom: 40px; padding: 0 20px; }
        
        .category-card { background: white; border: 1px solid #eee; border-radius: 12px; padding: 30px 20px; transition: all 0.4s ease; cursor: pointer; display: flex; flex-direction: column; align-items: center; position: relative; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .category-card:hover { transform: translateY(-10px); box-shadow: 0 15px 30px rgba(30, 132, 73, 0.2); border-color: var(--primary); }
        .category-card::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 5px; background: var(--primary); transform: scaleX(0); transition: transform 0.4s ease; transform-origin: left; }
        .category-card:hover::before { transform: scaleX(1); }
        
        .icon-container { width: 80px; height: 80px; background-color: #f0f8f0; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 20px; color: var(--primary); font-size: 32px; transition: all 0.4s ease; }
        .category-card:hover .icon-container { background-color: var(--primary); color: white; transform: rotateY(180deg); }
        
        .category-title { font-size: 1.4rem; font-weight: bold; color: var(--dark); margin-bottom: 10px; }
        .category-desc { font-size: 0.9rem; color: #777; margin-bottom: 20px; }
        
        .btn-access { margin-top: auto; background-color: transparent; color: var(--primary); border: 2px solid var(--primary); padding: 8px 20px; border-radius: 20px; font-weight: bold; transition: all 0.3s; }
        .category-card:hover .btn-access { background-color: var(--primary); color: white; }

        /* --- ESTILOS DA LOJA (UNIFORMES) --- */
        #shop-section { display: none; } /* Começa oculto */
        
        header { background: linear-gradient(135deg, var(--primary), #145A32); color: white; text-align: center; padding: 30px 20px; position: relative; }
        .logo-container { display: flex; flex-direction: column; align-items: center; margin-bottom: 15px; }
        .logo-img { width: 120px; height: 120px; margin-bottom: 15px; overflow: hidden; display: flex; align-items: center; justify-content: center; }
        .logo-img img { max-width: 100%; max-height: 100%; object-fit: contain; }
        .logo-aceji { font-size: 2rem; font-weight: bold; color: white; text-transform: uppercase; letter-spacing: 2px; }
        
        .btn-back-menu { position: absolute; top: 20px; left: 20px; background: rgba(255,255,255,0.2); color: white; border: 1px solid white; padding: 8px 15px; border-radius: 5px; cursor: pointer; font-size: 0.9rem; transition: 0.3s; z-index: 100; text-decoration: none; display: flex; align-items: center; gap: 5px; }
        .btn-back-menu:hover { background: white; color: var(--primary); }

        .form-container { padding: 30px; }
        .section-title { color: var(--primary); border-bottom: 2px solid var(--secondary); padding-bottom: 10px; margin: 25px 0 15px; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: 600; }
        input, select, textarea { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px; font-size: 16px; }
        
        .product-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .product-card { border: 1px solid #ddd; border-radius: 8px; padding: 15px; text-align: center; transition: transform 0.3s, box-shadow 0.3s; background: white; }
        .product-card:hover { transform: translateY(-5px); box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1); border-color: var(--primary); }
        
        .product-image-container { position: relative; height: 200px; background: white; margin-bottom: 10px; display: flex; align-items: center; justify-content: center; border-radius: 4px; border: 1px solid #eee; overflow: hidden; cursor: pointer; }
        .product-image { width: 100%; height: 100%; object-fit: contain; transition: transform 0.5s ease; }
        .product-image:hover { transform: scale(1.1); }
        
        .zoom-icon, .flip-icon { position: absolute; top: 10px; background-color: rgba(0, 0, 0, 0.7); color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; opacity: 0; transition: opacity 0.3s; cursor: pointer; z-index: 10; }
        .zoom-icon { right: 10px; }
        .flip-icon { left: 10px; }
        .product-image-container:hover .zoom-icon, .product-image-container:hover .flip-icon { opacity: 1; }
        
        .product-title { font-weight: bold; margin-bottom: 5px; color: var(--dark); }
        .product-price { color: var(--primary); font-weight: 600; margin-bottom: 10px; }
        .quantity { width: 60px; text-align: center; }
        
        .flip-navigation { display: flex; justify-content: center; margin-top: 10px; gap: 10px; }
        .flip-btn { background-color: var(--primary); color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; font-size: 14px; display: flex; align-items: center; gap: 5px; }
        .flip-btn:hover { background-color: #145A32; }

        .btn-submit { background-color: var(--primary); color: white; border: none; padding: 15px 30px; font-size: 18px; font-weight: bold; border-radius: 4px; cursor: pointer; display: block; width: 100%; transition: background-color 0.3s; margin-top: 20px; }
        .btn-submit:hover { background-color: #145A32; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); }

        /* Pagamento e Confirmação */
        .payment-options { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 20px 0; }
        .payment-option { border: 2px solid #ddd; border-radius: 8px; padding: 20px; cursor: pointer; transition: all 0.3s ease; background: white; }
        .payment-option.selected { border-color: var(--primary); background-color: #f0f8f0; box-shadow: 0 4px 12px rgba(30, 132, 73, 0.2); }
        .payment-option-value { font-size: 1.3rem; font-weight: bold; color: var(--primary); }
        
        .payment-page, .confirmation-page { display: none; text-align: center; padding: 40px 20px; }
        .pix-container { background: white; border-radius: 10px; padding: 30px; margin: 30px auto; max-width: 500px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1); border: 2px solid var(--pix); }
        .qrcode-image { width: 250px; height: 250px; margin: 0 auto 20px; border: 1px solid #ddd; border-radius: 8px; overflow: hidden; }
        .qrcode-image img { width: 100%; height: 100%; object-fit: cover; }
        
        .social-bar { background-color: #f9f9f9; padding: 20px; display: flex; justify-content: center; gap: 20px; border-top: 1px solid #eee; margin-top: 40px; }
        .social-link { width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px; text-decoration: none; transition: transform 0.3s; }
        .social-link:hover { transform: scale(1.1); }
        .instagram { background: var(--instagram); }
        .whatsapp { background: var(--whatsapp); }

        /* Modal */
        .modal { display: none; position: fixed; z-index: 2000; padding-top: 50px; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.9); overflow: auto; }
        .modal-content { display: block; margin: 0 auto; max-width: 90%; max-height: 80vh; object-fit: contain; }
        .close { position: absolute; top: 15px; right: 35px; color: #f1f1f1; font-size: 40px; font-weight: bold; cursor: pointer; }

        @media (max-width: 768px) {
            .product-grid { grid-template-columns: repeat(2, 1fr); }
            .payment-options { grid-template-columns: 1fr; }
            .menu-title { font-size: 2.2rem; }
            .product-image-container { height: 180px; }
        }
        @media (max-width: 480px) {
            .product-grid { grid-template-columns: 1fr; }
            .logo-aceji { font-size: 1.5rem; }
        }
    </style>
</head>
<body>

    <div class="container">
        
        <div id="main-menu">
            <div class="menu-header">
                <div class="menu-logo-img">
                    <img src="https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/Imagens-Site-Uniforme/Escudo.png" alt="Logo ACEJI">
                </div>
                <h1 class="menu-title">ACEJI</h1>
                <p class="menu-subtitle">Loja Oficial & Eventos</p>
            </div>

            <div class="categories-grid">
                <div class="category-card" onclick="showShop()">
                    <div class="icon-container">
                        <i class="fas fa-tshirt"></i>
                    </div>
                    <h3 class="category-title">Uniformes</h3>
                    <p class="category-desc">Camisas de linha, goleiro e kits de jogo oficiais.</p>
                    <span class="btn-access">Ver Produtos</span>
                </div>

                <div class="category-card" onclick="window.open('https://docs.google.com/forms/d/e/1FAIpQLScG2QGpQ3HXJ5jugau2YCwrS-Tfy5X9-csNkyxgz--PRKeDow/viewform', '_blank')">
                    <div class="icon-container">
                        <i class="fas fa-running"></i>
                    </div>
                    <h3 class="category-title">Seja um Atleta</h3>
                    <p class="category-desc">Inscreva-se para representar o IFSC nos jogos.</p>
                    <span class="btn-access">Inscrever-se</span>
                </div>

                <div class="category-card" onclick="alert('Em breve!')">
                    <div class="icon-container"><i class="fas fa-beer"></i></div>
                    <h3 class="category-title">Canecas</h3>
                    <p class="category-desc">Acessórios para festas e integração.</p>
                    <span class="btn-access">Em Breve</span>
                </div>

                <div class="category-card" onclick="alert('Em breve!')">
                    <div class="icon-container"><i class="fas fa-vest"></i></div>
                    <h3 class="category-title">Camisetas</h3>
                    <p class="category-desc">Modelos casuais e dry-fit da atlética.</p>
                    <span class="btn-access">Em Breve</span>
                </div>

                <div class="category-card" onclick="alert('Em breve!')">
                    <div class="icon-container"><i class="fas fa-hiking"></i></div>
                    <h3 class="category-title">Trilhas</h3>
                    <p class="category-desc">Inscrições para eventos outdoor.</p>
                    <span class="btn-access">Em Breve</span>
                </div>
            </div>

            <div class="social-bar">
                <a href="https://www.instagram.com/acejiatletica/" target="_blank" class="social-link instagram"><i class="fab fa-instagram"></i></a>
                <a href="https://chat.whatsapp.com/Ks3hktil063FHygwoFVP7G" target="_blank" class="social-link whatsapp"><i class="fab fa-whatsapp"></i></a>
            </div>
            
            <footer style="background: none; color: #666; margin-top: 20px;">
                <p>ACEJI - A.A.A.CULTURAL E ESPORTIVA | IFSC JOINVILLE &copy; 2026</p>
            </footer>
        </div>


        <div id="shop-section">
            <header>
                <button class="btn-back-menu" onclick="showMenu()">
                    <i class="fas fa-arrow-left"></i> Menu
                </button>

                <div class="logo-container">
                    <div class="logo-img">
                        <img src="https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/Imagens-Site-Uniforme/Escudo.png" alt="Logo ACEJI">
                    </div>
                    <div class="logo-aceji">UNIFORMES DE JOGO</div>
                </div>
            </header>
            
            <div class="form-container" id="form-content">
                <form id="uniformOrderForm">
                    <h2 class="section-title">Dados Pessoais</h2>
                    <div class="form-group"><label>Nome Completo *</label><input type="text" id="name" required></div>
                    <div class="form-group"><label>E-mail *</label><input type="email" id="email" required></div>
                    <div class="form-group"><label>Telefone *</label><input type="tel" id="phone" required></div>
                    
                    <h2 class="section-title">Uniforme de Linha</h2>
                    <div class="product-grid">
                        <div class="product-card">
                            <div class="product-image-container" id="container-linha">
                                <img src="https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/main/Uniforme%201%20Frente.png" class="product-image" id="image-linha" onclick="openModalCurrentImage('linha')">
                                <div class="zoom-icon" onclick="openModalCurrentImage('linha')"><i class="fas fa-search-plus"></i></div>
                                <div class="flip-icon" onclick="flipImage('linha')"><i class="fas fa-sync-alt"></i></div>
                            </div>
                            <div class="flip-navigation">
                                <button type="button" class="flip-btn" onclick="showFront('linha')"><i class="fas fa-arrow-left"></i> Frente</button>
                                <button type="button" class="flip-btn" onclick="showBack('linha')">Verso <i class="fas fa-arrow-right"></i></button>
                            </div>
                            <div class="product-title">Camisa de Linha</div>
                            <div class="product-price">R$ 65,00</div>
                            <label>Quantidade:</label><input type="number" id="qty_linha" class="quantity" min="0" value="0">
                        </div>
                    </div>
                    
                    <h2 class="section-title">Uniforme de Goleiro/Líbero</h2>
                    <div class="product-grid">
                        <div class="product-card">
                            <div class="product-image-container" id="container-verde">
                                <img src="https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/main/Uniforme%20Verde%20Frente.png" class="product-image" id="image-verde" onclick="openModalCurrentImage('verde')">
                                <div class="zoom-icon" onclick="openModalCurrentImage('verde')"><i class="fas fa-search-plus"></i></div>
                                <div class="flip-icon" onclick="flipImage('verde')"><i class="fas fa-sync-alt"></i></div>
                            </div>
                            <div class="flip-navigation">
                                <button type="button" class="flip-btn" onclick="showFront('verde')"><i class="fas fa-arrow-left"></i> Frente</button>
                                <button type="button" class="flip-btn" onclick="showBack('verde')">Verso <i class="fas fa-arrow-right"></i></button>
                            </div>
                            <div class="product-title">Goleiro Verde</div>
                            <div class="product-price">R$ 65,00</div>
                            <label>Quantidade:</label><input type="number" id="qty_goleiro_verde" class="quantity" min="0" value="0">
                        </div>
                        
                        <div class="product-card">
                            <div class="product-image-container" id="container-rosa">
                                <img src="https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/main/Uniforme%20Rosa%20Frente.png" class="product-image" id="image-rosa" onclick="openModalCurrentImage('rosa')">
                                <div class="zoom-icon" onclick="openModalCurrentImage('rosa')"><i class="fas fa-search-plus"></i></div>
                                <div class="flip-icon" onclick="flipImage('rosa')"><i class="fas fa-sync-alt"></i></div>
                            </div>
                            <div class="flip-navigation">
                                <button type="button" class="flip-btn" onclick="showFront('rosa')"><i class="fas fa-arrow-left"></i> Frente</button>
                                <button type="button" class="flip-btn" onclick="showBack('rosa')">Verso <i class="fas fa-arrow-right"></i></button>
                            </div>
                            <div class="product-title">Goleiro Rosa</div>
                            <div class="product-price">R$ 65,00</div>
                            <label>Quantidade:</label><input type="number" id="qty_goleiro_rosa" class="quantity" min="0" value="0">
                        </div>
                    </div>
                    
                    <h2 class="section-title">Tamanhos e Observações</h2>
                    <div class="form-group">
                        <label>Tamanhos necessários (especificar) *</label>
                        <textarea id="sizes" rows="3" placeholder="Ex: 1 Camisa Linha M, 1 Goleiro G..." required></textarea>
                    </div>
                    <div class="form-group">
                        <label>Observações:</label>
                        <textarea id="notes" rows="3" placeholder="Ex: Personalização de nome..."></textarea>
                    </div>
                    
                    <h2 class="section-title">Opções de Pagamento</h2>
                    <div class="payment-options">
                        <div class="payment-option selected" id="option-full" onclick="selectPaymentOption('full')">
                            <h3>Pagamento Integral (100%)</h3>
                            <div class="payment-option-value" id="full-payment-value">R$ 0,00</div>
                            <p style="font-size: 0.9rem; margin-top:5px;">Pagamento único e entrega prioritária.</p>
                        </div>
                        <div class="payment-option" id="option-half" onclick="selectPaymentOption('half')">
                            <h3>Parcelado (50% + 50%)</h3>
                            <div class="payment-option-value" id="half-payment-value">R$ 0,00</div>
                            <p style="font-size: 0.9rem; margin-top:5px;">50% agora via PIX, 50% na entrega.</p>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn-submit">Ir para Pagamento</button>
                </form>
            </div>
            
            <div class="payment-page" id="payment-section">
                <h2 style="color:var(--primary); margin-bottom:20px;">Pagamento via PIX</h2>
                <div style="background:#f0f8ff; padding:15px; border-left:4px solid var(--pix); text-align:left; margin-bottom:20px;">
                    <p><strong>Total: <span id="payment-total">R$ 0,00</span></strong></p>
                    <p><strong>Pagar Agora: <span id="payment-now">R$ 0,00</span></strong></p>
                    <p id="msg-half" style="display:none; margin-top:10px;">Restante a pagar na entrega: <span id="remaining-amount">R$ 0,00</span></p>
                </div>
                
                <div class="pix-container">
                    <div class="qrcode-image">
                        <img src="https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/main/QR%20CODE%20LUIS.jpeg" alt="QR Code PIX">
                    </div>
                    <div style="background:#f8f9fa; padding:10px; border:1px dashed var(--pix); margin-top:15px;">
                        <p style="font-weight:bold; word-break:break-all;" id="pix-key">atleticaaceji@gmail.com</p>
                        <button onclick="copyPixKey()" style="background:var(--pix); color:white; border:none; padding:5px 10px; margin-top:10px; cursor:pointer; border-radius:4px;">Copiar Chave</button>
                    </div>
                </div>
                
                <button class="btn-submit" style="background-color:var(--success);" onclick="confirmPayment()">Confirmar Pagamento</button>
                <button onclick="backToForm()" style="background:none; border:none; color:#666; margin-top:15px; cursor:pointer; text-decoration:underline;">Voltar e corrigir dados</button>
            </div>
            
            <div class="confirmation-page" id="confirmation-section">
                <div style="font-size:80px; color:var(--success); margin-bottom:20px;"><i class="fas fa-check-circle"></i></div>
                <h2 style="color:var(--primary);">Pedido Realizado!</h2>
                <div style="background:#e8f5e9; padding:20px; border-radius:8px; margin:20px 0;">
                    <p>O WhatsApp da atlética abrirá automaticamente com seu pedido.</p>
                    <p><strong>Por favor, envie a mensagem e anexe o comprovante.</strong></p>
                </div>
                <button class="btn-submit" onclick="showMenu()">Voltar ao Menu Principal</button>
            </div>

            <footer>
                <p>ACEJI - A.A.A.CULTURAL E ESPORTIVA | IFSC JOINVILLE &copy; 2026</p>
            </footer>
        </div>

    </div>

    <div id="imageModal" class="modal">
        <span class="close" onclick="closeModal()">&times;</span>
        <img class="modal-content" id="modalImage">
    </div>

    <script>
        // --- NAVEGAÇÃO ENTRE TELAS (MENU <-> LOJA) ---
        function showShop() {
            document.getElementById('main-menu').style.display = 'none';
            document.getElementById('shop-section').style.display = 'block';
            window.scrollTo(0,0);
        }

        function showMenu() {
            // Reseta para o estado inicial
            document.getElementById('shop-section').style.display = 'none';
            document.getElementById('main-menu').style.display = 'block';
            
            // Reseta visualização interna da loja
            document.getElementById('form-content').style.display = 'block';
            document.getElementById('payment-section').style.display = 'none';
            document.getElementById('confirmation-section').style.display = 'none';
            window.scrollTo(0,0);
        }

        function backToForm() {
            document.getElementById('payment-section').style.display = 'none';
            document.getElementById('form-content').style.display = 'block';
            window.scrollTo(0,0);
        }

        // --- LÓGICA DA LOJA ---
        let orderData = {};
        let orderTotal = 0;
        let selectedPaymentOption = 'full';
        let paymentAmount = 0;

        document.addEventListener('DOMContentLoaded', function() {
            const quantityInputs = document.querySelectorAll('.quantity');
            quantityInputs.forEach(input => {
                input.addEventListener('change', calculateTotal);
                input.addEventListener('input', calculateTotal);
            });
            calculateTotal();

            document.getElementById('uniformOrderForm').addEventListener('submit', function(e) {
                e.preventDefault();
                processOrder();
            });
        });

        function calculateTotal() {
            orderTotal = 0;
            const prices = { linha: 65.00, goleiro_verde: 65.00, goleiro_rosa: 65.00 };
            
            for (const [key, price] of Object.entries(prices)) {
                const qty = parseInt(document.getElementById(`qty_${key}`).value) || 0;
                orderTotal += qty * price;
            }
            
            const btn = document.querySelector('#shop-section .btn-submit');
            btn.innerHTML = `Ir para Pagamento - Total: R$ ${orderTotal.toFixed(2)}`;
            
            document.getElementById('full-payment-value').textContent = `R$ ${orderTotal.toFixed(2)}`;
            document.getElementById('half-payment-value').textContent = `R$ ${(orderTotal / 2).toFixed(2)} (50%)`;
        }

        function selectPaymentOption(option) {
            selectedPaymentOption = option;
            document.querySelectorAll('.payment-option').forEach(opt => opt.classList.remove('selected'));
            document.getElementById(`option-${option}`).classList.add('selected');
        }

        function processOrder() {
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const phone = document.getElementById('phone').value;
            const sizes = document.getElementById('sizes').value;
            
            if(orderTotal <= 0) { alert('Selecione pelo menos um produto.'); return; }

            paymentAmount = selectedPaymentOption === 'full' ? orderTotal : orderTotal / 2;
            
            // Salva dados
            orderData = {
                name, email, phone, sizes,
                notes: document.getElementById('notes').value,
                quantities: {
                    linha: parseInt(document.getElementById('qty_linha').value) || 0,
                    goleiro_verde: parseInt(document.getElementById('qty_goleiro_verde').value) || 0,
                    goleiro_rosa: parseInt(document.getElementById('qty_goleiro_rosa').value) || 0
                },
                total: orderTotal,
                paymentAmount: paymentAmount
            };

            // Atualiza tela de pagamento
            document.getElementById('payment-total').textContent = `R$ ${orderTotal.toFixed(2)}`;
            document.getElementById('payment-now').textContent = `R$ ${paymentAmount.toFixed(2)}`;
            
            if(selectedPaymentOption === 'half') {
                document.getElementById('msg-half').style.display = 'block';
                document.getElementById('remaining-amount').textContent = `R$ ${(orderTotal/2).toFixed(2)}`;
            } else {
                document.getElementById('msg-half').style.display = 'none';
            }

            // Troca de tela
            document.getElementById('form-content').style.display = 'none';
            document.getElementById('payment-section').style.display = 'block';
            window.scrollTo(0,0);
            
            // Envia e-mail oculto (opcional)
            sendEmail('Novo Pedido (Iniciado)');
        }

        function confirmPayment() {
            if(confirm('Já realizou o PIX? Clique OK para abrir o WhatsApp.')) {
                document.getElementById('payment-section').style.display = 'none';
                document.getElementById('confirmation-section').style.display = 'block';
                
                sendEmail('Pedido Confirmado (Pago)');
                setTimeout(openWhatsApp, 1500);
            }
        }

        function sendEmail(subjectPrefix) {
            // Integração simples com FormSubmit (AJAX)
            const formData = new URLSearchParams();
            formData.append('_subject', `${subjectPrefix} - ACEJI`);
            formData.append('_template', 'table');
            formData.append('Cliente', orderData.name);
            formData.append('Total', `R$ ${orderData.total.toFixed(2)}`);
            formData.append('Pago Agora', `R$ ${orderData.paymentAmount.toFixed(2)}`);
            
            fetch('https://formsubmit.co/ajax/pedidosaceji@gmail.com', {
                method: 'POST', 
                headers: { 'Content-Type': 'application/x-www-form-urlencoded', 'Accept': 'application/json' },
                body: formData
            }).catch(e => console.log(e));
        }

        function openWhatsApp() {
            const payType = selectedPaymentOption === 'full' ? 'INTEGRAL' : 'PARCELADO';
            let msg = `*PEDIDO LOJA ACEJI*%0A%0A`;
            msg += `*Nome:* ${orderData.name}%0A`;
            msg += `*Pagamento:* ${payType}%0A`;
            msg += `*Total Pedido:* R$ ${orderData.total.toFixed(2)}%0A`;
            msg += `*Valor Pago:* R$ ${orderData.paymentAmount.toFixed(2)}%0A%0A`;
            msg += `*Itens:*%0A`;
            if(orderData.quantities.linha > 0) msg += `- Camisa Linha: ${orderData.quantities.linha}%0A`;
            if(orderData.quantities.goleiro_verde > 0) msg += `- Goleiro Verde: ${orderData.quantities.goleiro_verde}%0A`;
            if(orderData.quantities.goleiro_rosa > 0) msg += `- Goleiro Rosa: ${orderData.quantities.goleiro_rosa}%0A`;
            msg += `%0A*Tamanhos:* ${orderData.sizes}`;
            
            window.open(`https://wa.me/5547996664597?text=${msg}`, '_blank');
        }

        function copyPixKey() {
            navigator.clipboard.writeText(document.getElementById('pix-key').textContent);
            alert('Chave PIX copiada!');
        }

        // --- MANIPULAÇÃO DE IMAGENS ---
        function openModalCurrentImage(type) {
            document.getElementById('modalImage').src = document.getElementById(`image-${type}`).src;
            document.getElementById('imageModal').style.display = 'block';
        }
        function closeModal() { document.getElementById('imageModal').style.display = 'none'; }
        
        function flipImage(type) {
            const img = document.getElementById(`image-${type}`);
            if(img.src.includes('Frente')) showBack(type); else showFront(type);
        }
        function showFront(type) {
            const baseUrl = 'https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/main/';
            const map = { 'linha': 'Uniforme%201%20Frente.png', 'verde': 'Uniforme%20Verde%20Frente.png', 'rosa': 'Uniforme%20Rosa%20Frente.png' };
            document.getElementById(`image-${type}`).src = baseUrl + map[type];
        }
        function showBack(type) {
            const baseUrl = 'https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/main/';
            const map = { 'linha': 'Uniforme%201%20Costas.png', 'verde': 'Uniforme%20Verde%20Costas.png', 'rosa': 'Uniforme%20Rosa%20Costas.png' };
            document.getElementById(`image-${type}`).src = baseUrl + map[type];
        }
        
        window.onclick = function(e) { if(e.target == document.getElementById('imageModal')) closeModal(); }
    </script>
</body>
</html>
