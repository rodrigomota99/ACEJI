<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACEJI - Uniformes de Jogo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ... (todo o CSS anterior permanece igual) ... */
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo-container">
                <div class="logo-img">
                    <img src="https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/Imagens-Site-Uniforme/Escudo.png" alt="Logo ACEJI">
                </div>
                <div class="logo-aceji">ACEJI</div>
                <div class="logo-subtitle">Formulário de Compra de Uniformes de Jogo</div>
            </div>
            <div class="logo-text">A.A.A.CULTURAL E ESPORTIVA | IFSC JOINVILLE</div>
        </header>
        
        <!-- Formulário de Pedido -->
        <div class="form-container" id="form-section">
            <form id="uniformOrderForm">
                <h2 class="section-title">Dados Pessoais</h2>
                
                <div class="form-group">
                    <label for="name">Nome Completo <span class="required">*</span></label>
                    <input type="text" id="name" name="name" required>
                </div>
                
                <div class="form-group">
                    <label for="email">E-mail <span class="required">*</span></label>
                    <input type="email" id="email" name="email" required>
                </div>
                
                <div class="form-group">
                    <label for="phone">Telefone <span class="required">*</span></label>
                    <input type="tel" id="phone" name="phone" required>
                </div>
                
                <h2 class="section-title">Uniforme de Linha</h2>
                <div class="product-grid">
                    <div class="product-card">
                        <div class="product-image-container" id="container-linha">
                            <img src="https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/Imagens-Site-Uniforme/Uniforme%20Linha.png" alt="Uniforme de Linha" class="product-image" id="image-linha" onclick="openModalCurrentImage('linha')">
                            <div class="zoom-icon" onclick="openModalCurrentImage('linha')">
                                <i class="fas fa-search-plus"></i>
                            </div>
                            <div class="flip-icon" onclick="flipImage('linha')">
                                <i class="fas fa-sync-alt"></i>
                            </div>
                        </div>
                        <div class="flip-navigation">
                            <button type="button" class="flip-btn" onclick="showFront('linha')">
                                <i class="fas fa-arrow-left"></i> Frente
                            </button>
                            <button type="button" class="flip-btn" onclick="showBack('linha')">
                                Verso <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                        <div class="product-title">Camisa de Linha</div>
                        <div class="product-price">R$ 65,00</div>
                        <label for="qty_linha">Quantidade:</label>
                        <input type="number" id="qty_linha" class="quantity" name="qty_linha" min="0" value="0">
                    </div>
                </div>
                
                <h2 class="section-title">Uniforme de Goleiro/Líbero</h2>
                <div class="product-grid">
                    <div class="product-card">
                        <div class="product-image-container" id="container-verde">
                            <img src="https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/Imagens-Site-Uniforme/Uniforme%20Verde.png" alt="Uniforme de Goleiro/Líbero Verde" class="product-image" id="image-verde" onclick="openModalCurrentImage('verde')">
                            <div class="zoom-icon" onclick="openModalCurrentImage('verde')">
                                <i class="fas fa-search-plus"></i>
                            </div>
                            <div class="flip-icon" onclick="flipImage('verde')">
                                <i class="fas fa-sync-alt"></i>
                            </div>
                        </div>
                        <div class="flip-navigation">
                            <button type="button" class="flip-btn" onclick="showFront('verde')">
                                <i class="fas fa-arrow-left"></i> Frente
                            </button>
                            <button type="button" class="flip-btn" onclick="showBack('verde')">
                                Verso <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                        <div class="product-title">Goleiro/Líbero Verde</div>
                        <div class="product-price">R$ 65,00</div>
                        <label for="qty_goleiro_verde">Quantidade:</label>
                        <input type="number" id="qty_goleiro_verde" class="quantity" name="qty_goleiro_verde" min="0" value="0">
                    </div>
                    
                    <div class="product-card">
                        <div class="product-image-container" id="container-rosa">
                            <img src="https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/Imagens-Site-Uniforme/Uniforme%20Rosa.png" alt="Uniforme de Goleiro/Líbero Rosa" class="product-image" id="image-rosa" onclick="openModalCurrentImage('rosa')">
                            <div class="zoom-icon" onclick="openModalCurrentImage('rosa')">
                                <i class="fas fa-search-plus"></i>
                            </div>
                            <div class="flip-icon" onclick="flipImage('rosa')">
                                <i class="fas fa-sync-alt"></i>
                            </div>
                        </div>
                        <div class="flip-navigation">
                            <button type="button" class="flip-btn" onclick="showFront('rosa')">
                                <i class="fas fa-arrow-left"></i> Frente
                            </button>
                            <button type="button" class="flip-btn" onclick="showBack('rosa')">
                                Verso <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                        <div class="product-title">Goleiro/Líbero Rosa</div>
                        <div class="product-price">R$ 65,00</div>
                        <label for="qty_goleiro_rosa">Quantidade:</label>
                        <input type="number" id="qty_goleiro_rosa" class="quantity" name="qty_goleiro_rosa" min="0" value="0">
                    </div>
                </div>
                
                <h2 class="section-title">Meião</h2>
                <div class="product-grid">
                    <div class="product-card">
                        <div class="product-image-container" onclick="openModal('https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/Imagens-Site-Uniforme/Mei%C3%A3o.png')">
                            <img src="https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/Imagens-Site-Uniforme/Mei%C3%A3o.png" alt="Meião" class="product-image">
                            <div class="zoom-icon">
                                <i class="fas fa-search-plus"></i>
                            </div>
                        </div>
                        <div class="product-title">Meião</div>
                        <div class="product-price">R$ 30,00</div>
                        <label for="qty_meiao">Quantidade:</label>
                        <input type="number" id="qty_meiao" class="quantity" name="qty_meiao" min="0" value="0">
                    </div>
                </div>
                
                <h2 class="section-title">Bermuda</h2>
                <div class="product-grid">
                    <div class="product-card">
                        <div class="product-image-container" onclick="openModal('https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/Imagens-Site-Uniforme/Bermuda.png')">
                            <img src="https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/Imagens-Site-Uniforme/Bermuda.png" alt="Bermuda" class="product-image">
                            <div class="zoom-icon">
                                <i class="fas fa-search-plus"></i>
                            </div>
                        </div>
                        <div class="product-title">Bermuda</div>
                        <div class="product-price">R$ 35,00</div>
                        <label for="qty_bermuda">Quantidade:</label>
                        <input type="number" id="qty_bermuda" class="quantity" name="qty_bermuda" min="0" value="0">
                    </div>
                </div>
                
                <h2 class="section-title">Tamanhos e Observações</h2>
                <div class="form-group">
                    <label for="sizes">Tamanhos necessários (especificar quantidades por tamanho) <span class="required">*</span></label>
                    <textarea id="sizes" name="sizes" rows="3" placeholder="Ex: 2 unidades Camisa Goleiro/Líbero M, 1 unidade Camisa de Linha G..." required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="notes">Observações ou solicitações especiais:</label>
                    <textarea id="notes" name="notes" rows="3" placeholder="Ex: Personalização de nome 'Silva' e número '10' na Camisa de Linha..."></textarea>
                </div>
                
                <h2 class="section-title">Opções de Pagamento</h2>
                <div class="payment-options">
                    <div class="payment-option" id="option-full" onclick="selectPaymentOption('full')">
                        <div class="payment-option-header">
                            <div class="payment-option-title">Pagamento Integral</div>
                            <div class="payment-option-badge">100%</div>
                        </div>
                        <div class="payment-option-description">Pague o valor total agora e receba seu pedido completo</div>
                        <div class="payment-option-value" id="full-payment-value">R$ 0,00</div>
                        <div class="payment-option-details">
                            • Pagamento único e completo<br>
                            • Processamento mais rápido<br>
                            • Entrega prioritária
                        </div>
                    </div>
                    
                    <div class="payment-option" id="option-half" onclick="selectPaymentOption('half')">
                        <div class="payment-option-header">
                            <div class="payment-option-title">Pagamento Parcelado</div>
                            <div class="payment-option-badge">50% + 50%</div>
                        </div>
                        <div class="payment-option-description">Pague 50% agora e 50% na entrega do produto</div>
                        <div class="payment-option-value" id="half-payment-value">R$ 0,00 (50%)</div>
                        <div class="payment-option-details">
                            • 50% agora via PIX<br>
                            • 50% na entrega (dinheiro/PIX)<br>
                            • Ideal para orçamento flexível
                        </div>
                    </div>
                </div>
                
                <input type="hidden" id="payment-type" name="payment-type" value="">
                
                <div class="loading" id="loading">
                    <div class="loading-spinner"></div>
                    <p>Processando pedido...</p>
                </div>
                
                <button type="submit" class="btn-submit">Finalizar Pedido e Ir para Pagamento</button>
            </form>
        </div>
        
        <!-- Página de Pagamento PIX -->
        <div class="payment-page" id="payment-section">
            <div class="payment-icon">
                <i class="fas fa-qrcode"></i>
            </div>
            <h2 class="payment-title">Pagamento via PIX</h2>
            <div class="payment-message">
                <p>Seu pedido foi processado com sucesso! Realize o pagamento via PIX para confirmar seu pedido.</p>
                <p><strong>Valor total do pedido: <span id="payment-total">R$ 0,00</span></strong></p>
                <p><strong>Valor a pagar agora: <span id="payment-now">R$ 0,00</span></strong></p>
            </div>
            
            <div class="payment-info" id="payment-info-full" style="display: none;">
                <h3>📦 Pagamento Integral</h3>
                <p>Você selecionou o pagamento integral. Após a confirmação do pagamento, seu pedido será processado para entrega.</p>
            </div>
            
            <div class="payment-info" id="payment-info-half" style="display: none;">
                <h3>💳 Pagamento Parcelado (50% + 50%)</h3>
                <p>Você selecionou o pagamento parcelado. Estamos processando apenas 50% do valor agora.</p>
                <p><strong>Valor restante:</strong> <span id="remaining-amount">R$ 0,00</span> (a ser pago na entrega)</p>
            </div>
            
            <div class="pix-container">
                <div class="qrcode-image">
                    <img src="https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/main/image.png" alt="QR Code PIX">
                </div>
                
                <div class="pix-key">
                    <h3>Chave PIX (Copie e Cole)</h3>
                    <div class="pix-key-code" id="pix-key">atleticaaceji@gmail.com</div>
                    <button class="copy-btn" onclick="copyPixKey()">
                        <i class="fas fa-copy"></i> Copiar Chave PIX
                    </button>
                </div>
                
                <div class="payment-amount" id="payment-amount-display">R$ 0,00</div>
            </div>
            
            <div class="payment-steps">
                <h3>Como pagar:</h3>
                <ol>
                    <li>Abra seu aplicativo de banco</li>
                    <li>Selecione a opção PIX</li>
                    <li>Escaneie o QR Code ou cole a chave PIX</li>
                    <li>Confirme o valor e realize o pagamento</li>
                    <li>Volte aqui e clique em "Confirmar Pagamento"</li>
                </ol>
            </div>
            
            <button class="btn-confirm-payment" onclick="confirmPayment()">
                <i class="fas fa-check-circle"></i> Confirmar Pagamento
            </button>
        </div>
        
        <!-- Página de Confirmação -->
        <div class="confirmation-page" id="confirmation-section">
            <div class="confirmation-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h2 class="confirmation-title">Pagamento Confirmado!</h2>
            <div class="confirmation-message">
                <p id="confirmation-full" style="display: none;">Parabéns! Seu pagamento integral foi confirmado com sucesso. Seu pedido será processado para entrega.</p>
                <p id="confirmation-half" style="display: none;">Parabéns! Seu pagamento de 50% foi confirmado com sucesso. O restante será pago na entrega do produto.</p>
                <p>O WhatsApp abrirá automaticamente com os detalhes do seu pedido. Por favor, anexe o comprovante de pagamento e envie a mensagem.</p>
                <p><strong>Obrigado por escolher a ACEJI!</strong></p>
            </div>
            
            <div class="whatsapp-info">
                <h3>📱 WhatsApp Aberto Automaticamente</h3>
                <p>Se o WhatsApp não abriu automaticamente, <a href="#" id="manualWhatsappLink">clique aqui para abrir manualmente</a>.</p>
                <p>Por favor, anexe o comprovante de pagamento antes de enviar a mensagem.</p>
            </div>
            
            <div class="social-buttons">
                <a href="https://www.instagram.com/acejiatletica/" target="_blank" class="btn-social btn-instagram">
                    <i class="fab fa-instagram"></i>
                    Insta da ACEJI
                </a>
                <a href="https://chat.whatsapp.com/Ks3hktil063FHygwoFVP7G" target="_blank" class="btn-social btn-whatsapp">
                    <i class="fab fa-whatsapp"></i>
                    Grupo do Ninho
                </a>
            </div>
            
            <button class="btn-back" onclick="location.reload()">Fazer Novo Pedido</button>
        </div>
        
        <footer>
            <p>ACEJI - A.A.A.CULTURAL E ESPORTIVA | IFSC JOINVILLE &copy; 2025 - Todos os direitos reservados</p>
        </footer>
    </div>

    <!-- Modal para visualização de imagem -->
    <div id="imageModal" class="modal">
        <span class="close" onclick="closeModal()">&times;</span>
        <img class="modal-content" id="modalImage">
    </div>

    <script>
        // Variáveis globais para armazenar dados do pedido
        let orderData = {};
        let orderTotal = 0;
        let selectedPaymentOption = 'full';
        let paymentAmount = 0;

        // Adicione este script para calcular o total em tempo real
        document.addEventListener('DOMContentLoaded', function() {
            const quantityInputs = document.querySelectorAll('.quantity');
            
            quantityInputs.forEach(input => {
                input.addEventListener('change', calculateTotal);
                input.addEventListener('input', calculateTotal);
            });
            
            function calculateTotal() {
                orderTotal = 0;
                const prices = {
                    linha: 65.00,
                    goleiro_verde: 65.00,
                    goleiro_rosa: 65.00,
                    meiao: 30.00,
                    bermuda: 35.00
                };
                
                for (const [key, price] of Object.entries(prices)) {
                    const quantity = parseInt(document.getElementById(`qty_${key}`).value) || 0;
                    orderTotal += quantity * price;
                }
                
                // Atualizar o texto do botão com o total
                const submitBtn = document.querySelector('.btn-submit');
                submitBtn.innerHTML = `Finalizar Pedido e Ir para Pagamento - Total: R$ ${orderTotal.toFixed(2)}`;
                
                // Atualizar valores das opções de pagamento
                updatePaymentOptions();
            }
            
            // Função para atualizar opções de pagamento
            function updatePaymentOptions() {
                document.getElementById('full-payment-value').textContent = `R$ ${orderTotal.toFixed(2)}`;
                document.getElementById('half-payment-value').textContent = `R$ ${(orderTotal / 2).toFixed(2)} (50%)`;
            }
            
            // Selecionar pagamento integral por padrão
            selectPaymentOption('full');
            
            // Calcular o total inicial
            calculateTotal();
            
            // Configurar o envio do formulário
            document.getElementById('uniformOrderForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Validação básica
                const name = document.getElementById('name').value;
                const email = document.getElementById('email').value;
                const phone = document.getElementById('phone').value;
                const sizes = document.getElementById('sizes').value;
                
                if (!name || !email || !phone || !sizes) {
                    alert('Por favor, preencha todos os campos obrigatórios.');
                    return;
                }
                
                // Verificar se pelo menos um produto foi selecionado
                const quantities = document.querySelectorAll('.quantity');
                let hasProduct = false;
                
                quantities.forEach(qty => {
                    if (parseInt(qty.value) > 0) {
                        hasProduct = true;
                    }
                });
                
                if (!hasProduct) {
                    alert('Por favor, selecione pelo menos um produto.');
                    return;
                }
                
                // Verificar se o total é maior que zero
                if (orderTotal <= 0) {
                    alert('O valor total do pedido deve ser maior que zero.');
                    return;
                }
                
                // Verificar se uma opção de pagamento foi selecionada
                if (!selectedPaymentOption) {
                    alert('Por favor, selecione uma opção de pagamento.');
                    return;
                }
                
                // Mostrar loading
                document.getElementById('loading').style.display = 'block';
                document.querySelector('.btn-submit').disabled = true;
                
                // Calcular valor do pagamento
                paymentAmount = selectedPaymentOption === 'full' ? orderTotal : orderTotal / 2;
                
                // Coletar dados do formulário
                orderData = {
                    name: name,
                    email: email,
                    phone: phone,
                    sizes: sizes,
                    notes: document.getElementById('notes').value,
                    quantities: {
                        linha: parseInt(document.getElementById('qty_linha').value) || 0,
                        goleiro_verde: parseInt(document.getElementById('qty_goleiro_verde').value) || 0,
                        goleiro_rosa: parseInt(document.getElementById('qty_goleiro_rosa').value) || 0,
                        meiao: parseInt(document.getElementById('qty_meiao').value) || 0,
                        bermuda: parseInt(document.getElementById('qty_bermuda').value) || 0
                    },
                    total: orderTotal,
                    paymentType: selectedPaymentOption,
                    paymentAmount: paymentAmount,
                    remainingAmount: selectedPaymentOption === 'half' ? orderTotal / 2 : 0
                };
                
                // Simular processamento
                setTimeout(function() {
                    // Atualizar valores na página de pagamento
                    document.getElementById('payment-total').textContent = `R$ ${orderTotal.toFixed(2)}`;
                    document.getElementById('payment-now').textContent = `R$ ${paymentAmount.toFixed(2)}`;
                    document.getElementById('payment-amount-display').textContent = `R$ ${paymentAmount.toFixed(2)}`;
                    
                    // Mostrar informações específicas do tipo de pagamento
                    if (selectedPaymentOption === 'full') {
                        document.getElementById('payment-info-full').style.display = 'block';
                        document.getElementById('payment-info-half').style.display = 'none';
                    } else {
                        document.getElementById('payment-info-full').style.display = 'none';
                        document.getElementById('payment-info-half').style.display = 'block';
                        document.getElementById('remaining-amount').textContent = `R$ ${(orderTotal / 2).toFixed(2)}`;
                    }
                    
                    // Mostrar página de pagamento
                    document.getElementById('form-section').style.display = 'none';
                    document.getElementById('payment-section').style.display = 'block';
                    document.getElementById('loading').style.display = 'none';
                    window.scrollTo(0, 0);
                    
                    // Enviar email inicial do pedido (SEM INTERFERIR NO FLUXO)
                    sendInitialEmail();
                }, 1000);
            });
            
            // Adicionar evento ao link manual do WhatsApp
            document.getElementById('manualWhatsappLink').addEventListener('click', function(e) {
                e.preventDefault();
                openWhatsApp();
            });
        });
        
        // Função para selecionar opção de pagamento
        function selectPaymentOption(option) {
            selectedPaymentOption = option;
            document.getElementById('payment-type').value = option;
            
            // Remover seleção de todas as opções
            document.querySelectorAll('.payment-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // Adicionar seleção à opção escolhida
            document.getElementById(`option-${option}`).classList.add('selected');
            
            // Atualizar valor do pagamento
            paymentAmount = option === 'full' ? orderTotal : orderTotal / 2;
        }
        
        // Função para copiar chave PIX
        function copyPixKey() {
            const pixKey = document.getElementById('pix-key').textContent;
            navigator.clipboard.writeText(pixKey).then(function() {
                alert('Chave PIX copiada para a área de transferência!');
            }).catch(function(err) {
                console.error('Erro ao copiar chave PIX: ', err);
                alert('Erro ao copiar chave PIX. Por favor, copie manualmente.');
            });
        }
        
        // Função SIMPLIFICADA para enviar email inicial
        function sendInitialEmail() {
            // Usar fetch API para enviar email sem interferir na navegação
            const formData = new URLSearchParams();
            formData.append('_subject', 'Novo Pedido de Uniforme ACEJI');
            formData.append('_template', 'table');
            formData.append('Nome', orderData.name);
            formData.append('Email', orderData.email);
            formData.append('Telefone', orderData.phone);
            formData.append('Camisa de Linha', orderData.quantities.linha);
            formData.append('Goleiro/Líbero Verde', orderData.quantities.goleiro_verde);
            formData.append('Goleiro/Líbero Rosa', orderData.quantities.goleiro_rosa);
            formData.append('Meião', orderData.quantities.meiao);
            formData.append('Bermuda', orderData.quantities.bermuda);
            formData.append('Tamanhos', orderData.sizes);
            formData.append('Observações', orderData.notes);
            formData.append('Total', `R$ ${orderData.total.toFixed(2)}`);
            formData.append('Tipo de Pagamento', selectedPaymentOption === 'full' ? 'Integral (100%)' : 'Parcelado (50% + 50%)');
            formData.append('Valor Pago', `R$ ${paymentAmount.toFixed(2)}`);
            formData.append('Valor Restante', selectedPaymentOption === 'half' ? `R$ ${(orderData.total / 2).toFixed(2)}` : 'R$ 0,00');
            formData.append('Status', 'AGUARDANDO PAGAMENTO');
            
            fetch('https://formsubmit.co/ajax/pedidosaceji@gmail.com', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                    'Accept': 'application/json'
                },
                body: formData
            })
            .then(response => response.json())
            .then(data => console.log('Email enviado com sucesso'))
            .catch(error => console.error('Erro ao enviar email:', error));
        }
        
        // Função para confirmar pagamento
        function confirmPayment() {
            if (confirm('Você realizou o pagamento PIX? Clique em OK para confirmar e abrir o WhatsApp.')) {
                // Mostrar mensagem de confirmação específica
                if (selectedPaymentOption === 'full') {
                    document.getElementById('confirmation-full').style.display = 'block';
                    document.getElementById('confirmation-half').style.display = 'none';
                } else {
                    document.getElementById('confirmation-full').style.display = 'none';
                    document.getElementById('confirmation-half').style.display = 'block';
                }
                
                // Mostrar página de confirmação
                document.getElementById('payment-section').style.display = 'none';
                document.getElementById('confirmation-section').style.display = 'block';
                window.scrollTo(0, 0);
                
                // Enviar email de confirmação de pagamento
                sendPaymentConfirmationEmail();
                
                // Abrir WhatsApp automaticamente após 2 segundos
                setTimeout(openWhatsApp, 2000);
            }
        }
        
        // Função SIMPLIFICADA para enviar email de confirmação
        function sendPaymentConfirmationEmail() {
            const formData = new URLSearchParams();
            formData.append('_subject', `CONFIRMAÇÃO - Pedido de Uniforme ACEJI - ${selectedPaymentOption === 'full' ? 'PAGO INTEGRAL' : 'PAGO 50%'}`);
            formData.append('Nome', orderData.name);
            formData.append('Email', orderData.email);
            formData.append('Telefone', orderData.phone);
            formData.append('Camisa de Linha', orderData.quantities.linha);
            formData.append('Goleiro/Líbero Verde', orderData.quantities.goleiro_verde);
            formData.append('Goleiro/Líbero Rosa', orderData.quantities.goleiro_rosa);
            formData.append('Meião', orderData.quantities.meiao);
            formData.append('Bermuda', orderData.quantities.bermuda);
            formData.append('Tamanhos', orderData.sizes);
            formData.append('Observações', orderData.notes);
            formData.append('Total', `R$ ${orderData.total.toFixed(2)}`);
            formData.append('Tipo de Pagamento', selectedPaymentOption === 'full' ? 'Integral (100%)' : 'Parcelado (50% + 50%)');
            formData.append('Valor Pago', `R$ ${paymentAmount.toFixed(2)}`);
            formData.append('Valor Restante', selectedPaymentOption === 'half' ? `R$ ${(orderData.total / 2).toFixed(2)}` : 'R$ 0,00');
            formData.append('Status', 'PAGAMENTO CONFIRMADO');
            formData.append('Data', new Date().toLocaleString('pt-BR'));
            
            fetch('https://formsubmit.co/ajax/pedidosaceji@gmail.com', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                    'Accept': 'application/json'
                },
                body: formData
            })
            .then(response => response.json())
            .then(data => console.log('Email de confirmação enviado com sucesso'))
            .catch(error => console.error('Erro ao enviar email de confirmação:', error));
        }

        // ... (restante das funções permanecem iguais) ...
        
        // Função para gerar o texto do pedido para WhatsApp
        function generateWhatsAppMessage() {
            const paymentType = selectedPaymentOption === 'full' ? 'INTEGRAL' : 'PARCELADO';
            const paymentStatus = selectedPaymentOption === 'full' ? 'PAGO' : '50% PAGO';
            
            let message = `*PEDIDO UNIFORME ACEJI - ${paymentStatus}*%0A%0A`;
            message += `*✅ Pagamento ${paymentType} Confirmado*%0A%0A`;
            message += `*Dados do Cliente:*%0A`;
            message += `👤 Nome: ${orderData.name}%0A`;
            message += `📧 E-mail: ${orderData.email}%0A`;
            message += `📞 Telefone: ${orderData.phone}%0A%0A`;
            
            message += `*Itens do Pedido:*%0A`;
            
            if (orderData.quantities.linha > 0) {
                message += `🏐 Camisa de Linha: ${orderData.quantities.linha} unidade(s) - R$ ${(orderData.quantities.linha * 65).toFixed(2)}%0A`;
            }
            
            if (orderData.quantities.goleiro_verde > 0) {
                message += `🧤 Goleiro/Líbero Verde: ${orderData.quantities.goleiro_verde} unidade(s) - R$ ${(orderData.quantities.goleiro_verde * 65).toFixed(2)}%0A`;
            }
            
            if (orderData.quantities.goleiro_rosa > 0) {
                message += `🧤 Goleiro/Líbero Rosa: ${orderData.quantities.goleiro_rosa} unidade(s) - R$ ${(orderData.quantities.goleiro_rosa * 65).toFixed(2)}%0A`;
            }
            
            if (orderData.quantities.meiao > 0) {
                message += `🧦 Meião: ${orderData.quantities.meiao} unidade(s) - R$ ${(orderData.quantities.meiao * 30).toFixed(2)}%0A`;
            }
            
            if (orderData.quantities.bermuda > 0) {
                message += `🩳 Bermuda: ${orderData.quantities.bermuda} unidade(s) - R$ ${(orderData.quantities.bermuda * 35).toFixed(2)}%0A`;
            }
            
            message += `%0A*💰 Total do Pedido: R$ ${orderData.total.toFixed(2)}*%0A`;
            message += `*💳 Valor Pago: R$ ${paymentAmount.toFixed(2)}*%0A`;
            
            if (selectedPaymentOption === 'half') {
                message += `*⚖️ Valor Restante: R$ ${(orderData.total / 2).toFixed(2)} (a pagar na entrega)*%0A`;
            }
            
            message += `%0A*📏 Tamanhos Solicitados:*%0A${orderData.sizes}%0A%0A`;
            
            if (orderData.notes) {
                message += `*📝 Observações:*%0A${orderData.notes}%0A%0A`;
            }
            
            message += `_Pedido ${paymentStatus.toLowerCase()} através do site_%0A`;
            message += `_Por favor, anexe o comprovante de pagamento abaixo_`;
            
            return message;
        }
        
        // Função para abrir WhatsApp com a mensagem do pedido
        function openWhatsApp() {
            const phoneNumber = "5547996664597";
            const message = generateWhatsAppMessage();
            const whatsappUrl = `https://wa.me/${phoneNumber}?text=${message}`;
            window.open(whatsappUrl, '_blank');
        }

        // ... (restante das funções do modal e flip de imagens permanecem iguais) ...
        
        // Funções para o modal de imagem
        function openModal(imageSrc) {
            document.getElementById('modalImage').src = imageSrc;
            document.getElementById('imageModal').style.display = 'block';
        }
        
        function openModalCurrentImage(type) {
            const image = document.getElementById(`image-${type}`);
            document.getElementById('modalImage').src = image.src;
            document.getElementById('imageModal').style.display = 'block';
        }
        
        function closeModal() {
            document.getElementById('imageModal').style.display = 'none';
        }
        
        // Funções para alternar entre frente e verso
        function flipImage(type) {
            const image = document.getElementById(`image-${type}`);
            const currentSrc = image.src;
            
            if (currentSrc.includes('Imagens-Site-Uniforme')) {
                if (type === 'linha') {
                    image.src = 'https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/main/Linha%20Tr%C3%A1s.png';
                } else if (type === 'verde') {
                    image.src = 'https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/main/Verde%20Tr%C3%A1s.png';
                } else if (type === 'rosa') {
                    image.src = 'https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/main/Rosa%20Tr%C3%A1s.png';
                }
            } else {
                if (type === 'linha') {
                    image.src = 'https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/Imagens-Site-Uniforme/Uniforme%20Linha.png';
                } else if (type === 'verde') {
                    image.src = 'https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/Imagens-Site-Uniforme/Uniforme%20Verde.png';
                } else if (type === 'rosa') {
                    image.src = 'https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/Imagens-Site-Uniforme/Uniforme%20Rosa.png';
                }
            }
            event.stopPropagation();
        }
        
        function showFront(type) {
            if (type === 'linha') {
                document.getElementById('image-linha').src = 'https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/Imagens-Site-Uniforme/Uniforme%20Linha.png';
            } else if (type === 'verde') {
                document.getElementById('image-verde').src = 'https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/Imagens-Site-Uniforme/Uniforme%20Verde.png';
            } else if (type === 'rosa') {
                document.getElementById('image-rosa').src = 'https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/Imagens-Site-Uniforme/Uniforme%20Rosa.png';
            }
        }
        
        function showBack(type) {
            if (type === 'linha') {
                document.getElementById('image-linha').src = 'https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/main/Linha%20Tr%C3%A1s.png';
            } else if (type === 'verde') {
                document.getElementById('image-verde').src = 'https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/main/Verde%20Tr%C3%A1s.png';
            } else if (type === 'rosa') {
                document.getElementById('image-rosa').src = 'https://raw.githubusercontent.com/rodrigomota99/ACEJI/refs/heads/main/Rosa%20Tr%C3%A1s.png';
            }
        }
        
        // Fechar o modal ao clicar fora da imagem
        window.onclick = function(event) {
            const modal = document.getElementById('imageModal');
            if (event.target == modal) {
                closeModal();
            }
        }
        
        // Fechar o modal com tecla ESC
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeModal();
            }
        });
    </script>
</body>
</html>
